<?xml version="1.0"?>
<f:view xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<h:head />
	<h:form>
		
		<p:panelGrid columns="3">

		<p:panel toggleOrientation="horizontal" toggleable="true" 
			header="Clients" toggleSpeed="500" toggleTitle="bla">
			<p:inputText id="clientName" label="Meno klienta"
				value="#{mainController.selectedClient.name}" />

			<p:dataTable id="clientTable" var="client" value="#{mainController.clientList}" 
				selection="#{mainController.selectedClient}" selectionMode="single"
				rowKey="#{client.id}" style="width:300px">
				
				<p:ajax event="rowSelect" update="@form" ajax="true" partialSubmit="true"
					listener="#{mainController.onChangeClient}" />
					
				<p:column headerText="Name">
					<h:outputText value="#{client.name}" />
				</p:column>
				
				<p:column>
					<p:commandButton title="Delete" action="#{mainController.actionDeleteClient(client.id)}" update="@form"/>
				</p:column>
				
			</p:dataTable>
			<p:inputText label="New client name" id="newClientNameInput" value="#{mainController.newClientName}"/>
			<p:commandButton action="#{mainController.actionAddNewClient}" value="Add new client" update="@form" ajax="true" partialSubmit="true"/>
		</p:panel>
		
		<p:panel toggleOrientation="horizontal" toggleable="true" 
			header="Projects" toggleSpeed="500" toggleTitle="bla2">
			
			<p:dataTable var="project" value="#{mainController.projectList}" 
				selection="#{mainController.selectedProject}" selectionMode="single"
				rowKey="#{project.id}" style="width:300px">
				
				<p:ajax event="rowSelect" update="@form" ajax="true" partialSubmit="true"
					listener="#{mainController.onChangeProject}" />
					
				<p:column headerText="Name">
					<h:outputText value="#{project.name}" />
				</p:column>
				
			</p:dataTable>
			<p:inputText label="New project name" id="newProjectNameInput" value="#{mainController.newProjectName}"/>
			<p:commandButton action="#{mainController.actionAddNewProject}" value="Add new project" update="@form" ajax="true" partialSubmit="true"/>
			
		</p:panel>
		
		<p:panel toggleOrientation="horizontal" toggleable="true" 
			header="Activities" toggleSpeed="500" toggleTitle="bla3">
			
			<p:dataTable var="activity" value="#{mainController.activityList}" 
				selection="#{mainController.selectedActivity}" selectionMode="single"
				rowKey="#{activity.id}" style="width:300px">
				
				<!-- <p:ajax event="rowSelect" update="@form" 
					listener="#{mainController.onChangeProject}" /> -->
					
				<p:column headerText="Name">
					<h:outputText value="#{activity.name}" />
				</p:column>
				
			</p:dataTable>
			
		</p:panel>

		</p:panelGrid>
	</h:form>
</f:view>